<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>מכשירי יצור · דרגת N לפי Ra</title>
<style>
:root {
  --bg: #0e1014;
  --card: #181b22;
  --ink: #f8f9fa;
  --muted: #a0a4ad;
  --accent: #3b82f6;
  --ok: #22c55e;
  --border: #2c2f36;
}
body {
  margin: 0;
  font-family: "Heebo", system-ui, sans-serif;
  background: var(--bg);
  color: var(--ink);
  padding: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  min-height: 100vh;
}
h2 {
  margin: 0;
  font-weight: 900;
  font-size: 1.6rem;
  text-align: center;
}
.sub {
  color: var(--muted);
  font-size: 0.9rem;
  text-align: center;
  margin-bottom: 20px;
}
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.35);
  width: 100%;
  max-width: 380px;
  margin-bottom: 20px;
}
.input-row {
  display: flex;
  gap: 10px;
  align-items: center;
  justify-content: center;
  margin-bottom: 10px;
}
input, select {
  flex: 1;
  padding: 14px 12px;
  font-size: 1.05rem;
  text-align: center;
  color: var(--ink);
  background: #0f1115;
  border-radius: 10px;
  border: 1px solid var(--border);
  outline: none;
  height: 52px;
  box-sizing: border-box;
}
select {
  max-width: 130px;
}
input:focus, select:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(59,130,246,0.3);
}
button {
  width: 100%;
  padding: 14px;
  border-radius: 10px;
  background: var(--accent);
  border: none;
  font-weight: 700;
  color: #fff;
  font-size: 1.05rem;
  cursor: pointer;
  margin-top: 8px;
}
button:hover { filter: brightness(1.2); }

.result {
  margin-top: 15px;
  text-align: center;
}
.bigN {
  font-size: 2.6rem;
  font-weight: 900;
  color: var(--ok);
  margin: 12px 0;
  letter-spacing: 1px;
}
.result-details {
  font-size: 1rem;
  color: var(--muted);
}
.tableWrap {
  width: 100%;
  max-width: 750px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  margin-top: 35px;
  overflow-x: auto;
  padding: 10px;
}
table {
  width: 100%;
  border-collapse: collapse;
  color: var(--ink);
}
th, td {
  padding: 10px;
  border-bottom: 1px solid var(--border);
  text-align: center;
}
th {
  color: var(--muted);
  font-size: 0.9rem;
  font-weight: 700;
}
tr.active {
  background-color: rgba(34,197,94,0.18);
  border-left: 3px solid var(--ok);
}
.fade { animation: fade 0.25s ease-out both; }
@keyframes fade { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: none; } }
</style>
</head>
<body>
  <h2>דרגת N לפי Ra</h2>
  <div class="sub">הזן ערך Ra וקבל את דרגת ה־N והטווח לפי תקן ISO 1302</div>

  <div class="card fade">
    <div class="input-row">
      <input id="ra" type="number" inputmode="decimal" placeholder="לדוגמה 2.5">
      <select id="unit">
        <option value="um">(µm)</option>
        <option value="uin">(µin)</option>
      </select>
    </div>
    <button onclick="calc()">חשב</button>

    <div class="result" id="res">
      <div class="bigN">—</div>
      <div class="result-details">Ra = — µm</div>
      <div class="result-details">טווח —</div>
    </div>
  </div>

  <div class="tableWrap fade" id="tableWrap">
    <table id="tbl">
      <thead>
        <tr><th>דרגה</th><th>Ra נומינלי (µm)</th><th>טווח (µm)</th><th>Ra (µin)</th></tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>

<script>
const µmToµin = v => v * 39.3701;
const fmt = v => Number(v).toFixed(3);
const N = [
  {n:1, ra:0.025}, {n:2, ra:0.05}, {n:3, ra:0.1}, {n:4, ra:0.2},
  {n:5, ra:0.4}, {n:6, ra:0.8}, {n:7, ra:1.6}, {n:8, ra:3.2},
  {n:9, ra:6.3}, {n:10, ra:12.5}, {n:11, ra:25}, {n:12, ra:50}
];
const bands = N.map((g,i)=>{
  const lo = i===0?0:Math.sqrt(g.ra*N[i-1].ra);
  const hi = i===N.length-1?Infinity:Math.sqrt(g.ra*N[i+1].ra);
  return {...g, lo, hi};
});
const tbody = document.getElementById('tbody');
bands.forEach(b=>{
  const hiShow = b.hi===Infinity?b.ra*Math.sqrt(2):b.hi;
  tbody.innerHTML += `
    <tr id="rowN${b.n}">
      <td><b>N${b.n}</b></td>
      <td>${fmt(b.ra)}</td>
      <td>${fmt(b.lo)} – ${fmt(hiShow)}</td>
      <td>${fmt(µmToµin(b.ra))}</td>
    </tr>`;
});
function calc(){
  const input=document.getElementById('ra');
  const val=parseFloat(input.value.replace(',', '.'));
  const unit=document.getElementById('unit').value;
  const bigN=document.querySelector('.bigN');
  const det=document.querySelectorAll('.result-details');
  if(isNaN(val)||val<=0){
    bigN.textContent='—'; det[0].textContent='Ra = — µm'; det[1].textContent='טווח —';
    return;
  }
  const ra_um=unit==='uin'?val/39.3701:val;
  const g=bands.find(b=>ra_um>=b.lo&&ra_um<b.hi)||bands[bands.length-1];
  const hiShow=g.hi===Infinity?g.ra*Math.sqrt(2):g.hi;
  bigN.textContent=`N${g.n}`;
  det[0].textContent=`Ra = ${fmt(ra_um)} µm (${fmt(µmToµin(ra_um))} µin)`;
  det[1].textContent=`טווח: ${fmt(g.lo)} – ${fmt(hiShow)} µm`;
  document.querySelectorAll('tr').forEach(tr=>tr.classList.remove('active'));
  const active=document.getElementById(`rowN${g.n}`);
  active.classList.add('active');
  active.scrollIntoView({behavior:"smooth",block:"center"});
}
</script>
</body>
</html>
